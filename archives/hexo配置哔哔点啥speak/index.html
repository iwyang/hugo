<!doctype html><html lang=zh-CN dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="{% note warning flat %} 2022.8.1 由于腾讯云开发要开始收费了，故将哔哔点啥改成Speak。点击直达：{% btn &lsquo;/archives/6c31209c/#部"><title>hexo配置哔哔点啥&&amp;Speak</title>
<link rel=canonical href=/archives/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5speak/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="hexo配置哔哔点啥&&Speak"><meta property='og:description' content="{% note warning flat %} 2022.8.1 由于腾讯云开发要开始收费了，故将哔哔点啥改成Speak。点击直达：{% btn &lsquo;/archives/6c31209c/#部"><meta property='og:url' content='/archives/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5speak/'><meta property='og:site_name' content="Bore's Notes"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='hexo'><meta property='article:tag' content='hugo'><meta property='article:published_time' content='2021-08-17T05:45:30+00:00'><meta property='article:modified_time' content='2024-08-07T17:56:55+08:00'><meta name=twitter:title content="hexo配置哔哔点啥&&Speak"><meta name=twitter:description content="{% note warning flat %} 2022.8.1 由于腾讯云开发要开始收费了，故将哔哔点啥改成Speak。点击直达：{% btn &lsquo;/archives/6c31209c/#部"><link rel="shortcut icon" href=/img/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu9759930031270941277.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Bore's Notes</a></h1><h2 class=site-description>博观而约取，厚积而薄发</h2></div></header><ol class=menu-social><li><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>首页</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/say/><svg class="icon icon-tabler icon-tabler-message-circle" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 20l1.3-3.9A9 8 0 117.7 19L3 20"/><line x1="12" y1="12" x2="12" y2="12.01"/><line x1="8" y1="12" x2="8" y2="12.01"/><line x1="16" y1="12" x2="16" y2="12.01"/></svg>
<span>说说</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>友链</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#服务部署>服务部署</a></li><li><a href=#前端部署>前端部署</a></li><li><a href=#部署bber-weixin公众号>部署BBer-weixin公众号</a></li><li><a href=#公众号发布说说>公众号发布说说</a></li><li><a href=#chrome--edge-发布说说>Chrome + Edge 发布说说</a><ol><li><a href=#安装本地插件>安装本地插件</a></li><li><a href=#应用商店安装插件>应用商店安装插件</a></li></ol></li><li><a href=#android-捷径发布说说>Android 捷径发布说说</a></li><li><a href=#修改ispeak-bber样式>修改<code>ispeak-bber</code>样式</a><ol><li><a href=#隐藏页面标题>隐藏页面标题</a></li><li><a href=#修改顶部文字>修改顶部文字</a></li><li><a href=#修复说说出现图片时顶部空白过大问题>修复说说出现图片时，顶部空白过大问题</a></li><li><a href=#解决公众号连续发多张图片>解决公众号连续发多张图片</a></li><li><a href=#取消显示一周前一小时前>取消显示&rsquo;一周前&rsquo;,&lsquo;一小时前&rsquo;</a></li></ol></li><li><a href=#butterfly-主题添加首页轮播>butterfly 主题添加首页轮播</a><ol><li><a href=#创建-widgetyml>创建 widget.yml</a></li><li><a href=#去掉侧边栏最新说说>去掉侧边栏最新说说</a></li><li><a href=#解决移动端二级菜单缩进问题>解决移动端二级菜单缩进问题</a></li></ol></li><li><a href=#部署speak>部署Speak</a><ol><li><a href=#docker-安装-mongodb>Docker 安装 MongoDB</a></li><li><a href=#kkapi-部署>kkapi 部署</a></li><li><a href=#开机启动kkapi>开机启动kkapi</a></li><li><a href=#配置域名访问>配置域名访问</a></li><li><a href=#kkapiadmin可视化管理后台>kkapiadmin（可视化管理后台）</a></li></ol></li><li><a href=#前端>前端</a><ol><li><a href=#v440以前>v4.4.0以前</a></li><li><a href=#v440以后>v4.4.0以后</a></li></ol></li><li><a href=#首页轮播>首页轮播</a><ol><li><a href=#去掉侧边栏最新说说-1>去掉侧边栏最新说说</a></li></ol></li><li><a href=#发送speak方式>发送speak方式</a><ol><li><a href=#安卓手机上快捷方式发送>安卓手机上快捷方式发送</a><ol><li><a href=#获取api的url>获取api的url</a></li><li><a href=#获取标签id>获取标签id</a></li><li><a href=#获取token网页端发送>获取token网页端发送</a></li><li><a href=#下载软件>下载软件</a></li><li><a href=#添加变量><strong>添加变量</strong></a></li><li><a href=#添加快捷方式>添加快捷方式</a></li></ol></li><li><a href=#网页端发送>网页端发送</a><ol><li><a href=#自己部署ispeak-biubiu>自己部署<code>ispeak-biubiu</code></a></li></ol></li><li><a href=#后台发送>后台发送</a></li></ol></li><li><a href=#speaktwikooverce域名绑定>speak&&amp;twikoo&&amp;Verce域名绑定</a></li><li><a href=#参考链接>参考链接</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E6%8A%80%E6%9C%AF/>技术</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/archives/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5speak/>hexo配置哔哔点啥&&amp;Speak</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2021-08-17</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 22 分钟</time></div></footer></div></header><section class=article-content><p>{% note warning flat %}
2022.8.1 由于腾讯云开发要开始收费了，故将<code>哔哔点啥</code>改成<code>Speak</code>。点击直达：{% btn &lsquo;/archives/6c31209c/#部署Speak&rsquo;,部署 Speak,far fa-hand-point-right,blue larger %}
{% endnote %}</p><p>{% note warning flat %}
2022.8.28 Vercel崩了，要绑定个二级域名才能用。或者使用服务器部署版。
{% endnote %}</p><h2 id=服务部署>服务部署</h2><p>1.首先保证成功激活腾讯云开发.</p><p>2.<a class=link href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&amp;appUrl=https://github.com/lmm214/bber&amp;branch=main" target=_blank rel=noopener>点击一键部署至云开发</a></p><blockquote><p>推荐创建上海环境。如选择广州环境，需要在 twikoo.init() 时额外指定环境 region: “ap-guangzhou”</p></blockquote><p>3.进入环境-登录授权，启用“匿名登录”</p><p>4.进入<a class=link href=https://console.cloud.tencent.com/tcb/env/safety target=_blank rel=noopener>环境-安全配置</a>，将博客网址添加到“WEB安全域名”</p><p>5.进入<a class=link href=https://console.cloud.tencent.com/tcb/env/access target=_blank rel=noopener>环境-HTTP访问服务</a>，复制链接备用。</p><p>进入<a class=link href=https://console.cloud.tencent.com/tcb/scf/index target=_blank rel=noopener>云函数</a>，修改自定义serverkey <code>bber</code> 并保存备用。</p><p>6.进入云函数，修改自定义serverkey bber 并保存备用。</p><p>7.扫码进入公众号，输入命名绑定。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/bber 你刚刚设置的key,https://你的云函数HTTP访问地址/bber
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>比如: /bber mykey,https://balabala.ap-shanghai.app.tcloudbase.com/bber
</span></span></code></pre></td></tr></table></div></div><p><strong>8. 手动添加一条哔哔 <em>必须要有</em></strong></p><p>进入腾讯云数据库->talks->文档列表->添加文档</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>字段: content
</span></span><span class=line><span class=cl>类型: string
</span></span><span class=line><span class=cl>值: 随便
</span></span></code></pre></td></tr></table></div></div><p>点击确定</p><p>验证微信发送</p><p>9.微信发送一条文字，返回哔哔成功，talks文档列表里多出来一条，即为服务部署成功。</p><h2 id=前端部署>前端部署</h2><p>1.打开Hugo的unsafe</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>markup</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tableOfContents</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>endLevel</span><span class=p>:</span><span class=w> </span><span class=m>4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ordered</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>startLevel</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>highlight</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>noClasses</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>goldmark</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>renderer</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>unsafe</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>2.新建一个<em>markdown</em>文件（此法不通，jsdelivr用不了，需要更换地址，见下文）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;speak&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>speak</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 使用markdown渲染 --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 使用markdown渲染 --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- &lt;script type=&#34;text/javascript&#34; src=&#34;https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber-md.min.js&#34; charset=&#34;utf-8&#34; &gt;&lt;/script&gt; --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 不使用markdown渲染 --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber.min.js&#34;</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- 解析微信表情（参考：https://github.com/buddys/qq-wechat-emotion-parser） --&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- &lt;script src=&#34;https://cdn.jsdelivr.net/gh/buddys/qq-wechat-emotion-parser@master/dist/qq-wechat-emotion-parser.min.js&#34;&gt;&lt;/script&gt; --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>ispeakBber</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#speak&#39;</span><span class=p>,</span> <span class=c1>// 容器选择器
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;bore&#39;</span><span class=p>,</span> <span class=c1>// 显示的昵称
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>envId</span><span class=o>:</span> <span class=s1>&#39;腾讯云开发环境id&#39;</span><span class=p>,</span> <span class=c1>// 环境id
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>region</span><span class=o>:</span> <span class=s1>&#39;ap-shanghai&#39;</span><span class=p>,</span> <span class=c1>// 腾讯云地址，默认为上海
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>limit</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span> <span class=c1>// 每次加载的条数，默认为5
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>avatar</span><span class=o>:</span> <span class=s1>&#39;https://cdn.jsdelivr.net/gh/iwyang/pic/avatar.jpg&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>fromColor</span><span class=o>:</span><span class=s1>&#39;rgb(245, 150, 170)&#39;</span><span class=p>,</span> <span class=c1>// 下方标签背景颜色 默认 rgb(245, 150, 170)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>loadingImg</span><span class=o>:</span> <span class=s1>&#39;https://7.dusays.com/2021/03/04/d2d5e983e2961.gif&#39;</span><span class=p>,</span> <span class=c1>// 自定义loading的图片，示例值为默认值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>dbName</span><span class=o>:</span><span class=s1>&#39;talks&#39;</span> <span class=c1>// 数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 哔哔加载完成后的回调函数，你可以写你自己的功能
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;哔哔 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>2022.5.18 <code>jsdelivr</code>用不了，需要修改地址（本地相对路径）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>&lt;style&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>.page-title {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>display</span><span class=p>:</span><span class=w> </span><span class=l>none;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;/style&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;!--  自言自语  --&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;div id=&#39;speak&#39;&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;script type=&#34;text/javascript&#34; src=&#34;/img/js/ispeak-bber.min.js&#34; charset=&#34;utf-8&#34; &gt;&lt;/script&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;script&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>ispeakBber</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>.init({</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>el</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;#speak&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 容器选择器</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Bore 🦄&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 显示的昵称</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>envId</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;hello-cloudbase-0gc8y1np937491cb&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 环境id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;ap-shanghai&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 腾讯云地址，默认为上海</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limit</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=p>,</span><span class=w> </span><span class=l>// 每次加载的条数，默认为5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>avatar</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/img/avatar.jpg&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 头像地址</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>fromColor:&#39;rgb(245, 150, 170)&#39;, // 下方标签背景颜色 默认 rgb(245, 150, 170)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>loadingImg</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/img/loading.gif&#39;</span><span class=p>,</span><span class=w> </span><span class=l>// 自定义loading的图片，示例值为默认值</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>dbName:&#39;talks&#39; // 数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=l>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>.then(function() {</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>// 哔哔加载完成后的回调函数，你可以写你自己的功能</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=l>console.log(&#39;哔哔 加载完成&#39;)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>}<span class=l>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;/script&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>&lt;/div&gt;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>3.bber 说说美化(调整了说说出现图片时，顶部空白过大问题；更换一种 timeago 方法，解决 “两周前”、“三周前” 等部分情况下显示实际日期的 bug；修复头像尺寸异常的 bug等)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!--  自言自语  --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#39;speak&#39;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/js/timeago.min.js&#34;</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/javascript&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/gh/kuole-o/bber-ispeak@main/dist/ispeak-bber.min.js&#34;</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=nx>ispeakBber</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#speak&#39;</span><span class=p>,</span> <span class=c1>// 容器选择器
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;夜的第八章 🦄&#39;</span><span class=p>,</span> <span class=c1>// 显示的昵称
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>envId</span><span class=o>:</span> <span class=s1>&#39;blogpkly-13278c&#39;</span><span class=p>,</span> <span class=c1>// 环境id
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>region</span><span class=o>:</span> <span class=s1>&#39;ap-shanghai&#39;</span><span class=p>,</span> <span class=c1>// 腾讯云地址，默认为上海
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>limit</span><span class=o>:</span> <span class=mi>7</span><span class=p>,</span> <span class=c1>// 每次加载的条数，默认为5
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>avatar</span><span class=o>:</span> <span class=s1>&#39;https://cdn.guole.fun/img/gl.jpg&#39;</span><span class=p>,</span> <span class=c1>// 头像地址
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fromColor</span><span class=o>:</span><span class=s1>&#39;rgb(245, 150, 170)&#39;</span><span class=p>,</span> <span class=c1>// 下方标签背景颜色 默认 rgb(245, 150, 170)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>loadingImg</span><span class=o>:</span> <span class=s1>&#39;https://7.dusays.com/2021/03/04/d2d5e983e2961.gif&#39;</span><span class=p>,</span> <span class=c1>// 自定义loading的图片，示例值为默认值
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>dbName</span><span class=o>:</span><span class=s1>&#39;talks&#39;</span> <span class=c1>// 数据的名称，默认talks，避免有人的命名不是这个，所以加入此配置字段。
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 哔哔加载完成后的回调函数，你可以写你自己的功能
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;哔哔 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=部署bber-weixin公众号>部署BBer-weixin公众号</h2><p>点击<a class=link href="https://console.cloud.tencent.com/tcb/env/index?action=CreateAndDeployCloudBaseProject&amp;appUrl=https%3A%2F%2Fgithub.com%2Flmm214%2Fbber-weixin&amp;branch=main" target=_blank rel=noopener>部署到云开发</a>将 BBer-weixin 微信公众号后端，一键部署到云开发。</p><p>对接的微信公众号简要流程：</p><p>1.点击 <a class=link href=https://console.cloud.tencent.com/tcb/scf/index target=_blank rel=noopener>bber-weixin</a> 云函数，右上角**【编辑】<strong>，开启</strong>【固定IP】<strong>，留存</strong>公网固定IP**。</p><blockquote><p>我将from <code>微信公众号</code>改成了<code>💎 WeChat</code></p></blockquote><p>2.进入<a class=link href=https://console.cloud.tencent.com/tcb/env/access target=_blank rel=noopener>环境-HTTP访问服务</a>，获取<code>触发路径链接</code>并留存，如以下格式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://bb-f5c0f-222222.ap-shanghai.app.tcloudbase.com/bber-weixin
</span></span></code></pre></td></tr></table></div></div><p>3.打开 <a class=link href=https://mp.weixin.qq.com/ target=_blank rel=noopener>微信公众平台</a>，进入开发-基本配置，获取<code>AppID</code>和<code>AppSecret</code>留存，修改<code>IP白名单</code>为上一步的公网固定IP。继续服务器配置：</p><blockquote><p>消息加密方式选择<code>兼容模式</code></p></blockquote><p>一个<code>URL</code>，即第2步留存的触发链接；</p><p>一个<code>Token</code>，预设为 <code>weixin</code></p><p><strong>!!!先不点，不点，不点，不点提交！！！</strong></p><p>4.回 <a class=link href=https://console.cloud.tencent.com/tcb/scf/index target=_blank rel=noopener>bber-weixin</a> 云函数，填入<code>微信公众号appid</code>、<code>微信公众号appsecret</code> 保存。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>const <span class=nv>token</span> <span class=o>=</span> <span class=s1>&#39;weixin&#39;</span> // 微信公众号的服务器验证用的令牌 token
</span></span><span class=line><span class=cl>//填入自己的微信公众号appid和appsecret
</span></span><span class=line><span class=cl>var <span class=nv>wxappid</span> <span class=o>=</span> <span class=s1>&#39;微信公众号appid&#39;</span>,
</span></span><span class=line><span class=cl>    <span class=nv>wxappsecret</span> <span class=o>=</span> <span class=s1>&#39;微信公众号appsecret&#39;</span>,
</span></span></code></pre></td></tr></table></div></div><p>5.回 <a class=link href=https://mp.weixin.qq.com/ target=_blank rel=noopener>微信公众平台</a>，提交，验证成功！</p><p>6.回 <a class=link href=https://console.cloud.tencent.com/tcb/scf/index target=_blank rel=noopener>bber-weixin</a> 云函数，注释第44行代码，保存。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>   <span class=k>if</span><span class=o>(</span><span class=nv>tmpStr</span> <span class=o>==</span> signature<span class=o>){</span>
</span></span><span class=line><span class=cl>        //请求来源鉴权
</span></span><span class=line><span class=cl>        //成功后注释下行代码
</span></span><span class=line><span class=cl>        //return event.queryStringParameters.echostr //成功后注释本行代码
</span></span><span class=line><span class=cl>        //成功后注释上行代码
</span></span></code></pre></td></tr></table></div></div><p>7.手动配置或更新代码： <a class=link href=https://github.com/lmm214/bber-weixin/tree/main/bber-weixin target=_blank rel=noopener>https://github.com/lmm214/bber-weixin/tree/main/bber-weixin</a></p><h2 id=公众号发布说说>公众号发布说说</h2><p><del>接上面，部署好自己的公众号就可以用公众号发布了。这里注意利用公众号发图片。</del></p><p>1.先在公众号发一张图片</p><p>2.接着输入<code>/a &lt;br>文字说明</code></p><p>(输入<code>&lt;br></code>是为了使图片和文字不处于同一行)</p><p>注意：用公众号发图片会一连发几张，不知道是什么原因，以后就用浏览器插件发图片，注意<strong>比例 16:9，长度568px</strong></p><h2 id=chrome--edge-发布说说>Chrome + Edge 发布说说</h2><h3 id=安装本地插件>安装本地插件</h3><p><a class=link href=https://cdn.guole.fun/others/bber%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%91%E5%B8%83%E6%8F%92%E4%BB%B6.zip target=_blank rel=noopener>点此下载我提取并修改的浏览器插件包</a></p><p>Chrome 安装本地插件：</p><p>访问 Chrome——更多工具——扩展程序——左上角“加载已解压的扩展程序”，选择我提供的附件，解压缩后的文件夹 1.0.0_0_Chrome，然后回到 Chrome，点开右上角<code>扩展程序</code>来固定插件。</p><p>注意：插件文件移动或丢失后，浏览器扩展失效，因为不是云端的，所以要保存在可靠路径。</p><h3 id=应用商店安装插件>应用商店安装插件</h3><p>下载地址：<a class=link href=https://chrome.google.com/webstore/detail/ispeak-bber%E6%97%B6%E5%85%89%E6%9C%BA/mmehomnjakoijcfmmofbmkaigcdkkbke/related target=_blank rel=noopener>iSpeak-bber时光机</a></p><p>本地插件<code>from</code>默认为<code>🌈 Chrome</code></p><h2 id=android-捷径发布说说>Android 捷径发布说说</h2><p>从 Github 下载安装这款 “HTTP 快捷方式” apk，安装后继续下文操作。</p><p>下载地址：<a class=link href=https://github.com/Waboodoo/HTTP-Shortcuts/releases target=_blank rel=noopener>HTTP-Shortcuts</a></p><p>打开 HTTP 快捷方式 App，选择新建快捷方式，自定义名称、描述，在 “基本设置” 中，设置方法为 “POST” 或 “GET”，URL 为</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://你后台显示的.ap-shanghai.app.tcloudbase.com/bber?key<span class=o>=</span>
</span></span></code></pre></td></tr></table></div></div><p>至于 key、from，我们设置为常量，text 则设置为变量 content，每次发布的时候填写说说内容。</p><p>点击 URL 右侧的 {}，选择添加变量。常量 key 为你云函数里的 key，如果没有特别设置就是 bber。from 我们设置一个好玩的如<code>📱 Android 11</code>。添加一个变量 content。（个人觉得from直接设置为<code>Android</code>就行，不然免得以后安卓升级版本，还要跟着修改。）</p><p>接着回到 URL 页面，补充完刚才添加的常量和变量，如以下格式：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>https://你后台显示的.ap-shanghai.app.tcloudbase.com/bber?key<span class=o>={</span>key<span class=o>}</span><span class=p>&amp;</span><span class=nv>from</span><span class=o>={</span>from<span class=o>}</span><span class=p>&amp;</span><span class=nv>text</span><span class=o>={</span>content<span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>右上角，保存这个快捷方式，然后长按发送到桌面，搞定！</p><h2 id=修改ispeak-bber样式>修改<code>ispeak-bber</code>样式</h2><h3 id=隐藏页面标题>隐藏页面标题</h3><p>将以下代码放在文章正文最上方。</p><p><a class=link href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener>hugo-stack</a>主题：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>article-header</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=nt>style</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><a class=link href=https://github.com/jerryc127/hexo-theme-butterfly target=_blank rel=noopener>hexo-butterfly</a>主题：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>page-title</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=nt>style</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=修改顶部文字>修改顶部文字</h3><p>自己胡乱改的，居然起了作用。不管了先用再说。</p><p>1.首先下载：<a class=link href=https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber-md.min.js target=_blank rel=noopener>ispeak-bber-md.min.js</a></p><p>2.用<code>Notepad++</code>打开，搜索<code>My BiBi</code>改成<code>我的说说</code>。</p><p>3.按F12，打开浏览器控制台，定位标题。可以发现<code>color: #49b1f5</code>前面就是标题字体大小，搜索<code>color: #49b1f5</code>，将前面的字体改成22px：<code>font-size: 22px</code></p><p>4.接着改图标大小，一样方法定位图标，可以发现<code>color: black</code>后面就是图标大小，搜索<code>color: black</code>，将后面图标大小改成22px：<code>font-size: 22px</code></p><h3 id=修复说说出现图片时顶部空白过大问题>修复说说出现图片时，顶部空白过大问题</h3><p>搜索<code>white-space</code>作如下修改</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gd>- {\n  padding: 10px 0;\n  white-space: pre-wrap;\n}
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ {\n  padding: 0.8rem 0;\n}
</span></span></span></code></pre></td></tr></table></div></div><p><del>注意：利用微信公众号发图片后追加文字说明，前面要加个换行符，要不然图片和文字处在同一行。</del></p><p>注意：用公众号发图片会一连发几张，不知道是什么原因，以后就用浏览器插件发图片，注意<strong>比例 16:9，长度568px</strong></p><h3 id=解决公众号连续发多张图片>解决公众号连续发多张图片</h3><p>云函数代码问题，改成下面这样即可（<strong>还未测试</strong>）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>104行
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=nv>res</span> <span class=o>=</span> await cloudRequest<span class=o>(</span>cloudHttpUrl,cloudKey,createTime,content<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>124行
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=nv>res</span> <span class=o>=</span> await cloudRequest<span class=o>(</span>cloudHttpUrl,cloudKey,createTime,content<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>160行
</span></span><span class=line><span class=cl><span class=k>function</span> cloudRequest<span class=o>(</span>cloudHttpUrl,cloudKey,createTime,content<span class=o>){</span>
</span></span></code></pre></td></tr></table></div></div><p>中，删掉 “createTime,”，接着</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>162行
</span></span><span class=line><span class=cl>var <span class=nv>param1</span> <span class=o>=</span> <span class=o>{</span><span class=s1>&#39;key&#39;</span>: cloudKey,<span class=s1>&#39;time&#39;</span>: createTime,<span class=s1>&#39;text&#39;</span>: content,<span class=s1>&#39;from&#39;</span>:<span class=s1>&#39;微信公众号&#39;</span><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>删掉 “’time’: createTime,” 就解决了。</p><h3 id=取消显示一周前一小时前>取消显示&rsquo;一周前&rsquo;,&lsquo;一小时前&rsquo;</h3><p>去掉“周前”，”月前“这些时间点：</p><ul><li><ol><li>找到<code>ispeak-bber-md.min.js</code> or <code>ispeak-bber.min.js</code></li></ol></li><li><p>2.复制下面这段代码，查找，然后删掉它们 (未测试)</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=nx>l</span><span class=o>&gt;=</span><span class=mi>1</span><span class=o>&amp;&amp;</span><span class=nx>l</span><span class=o>&lt;=</span><span class=mi>3</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34; &#34;</span><span class=o>+</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>l</span><span class=p>)</span><span class=o>+</span><span class=s2>&#34; 月前&#34;</span><span class=p>;</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nx>f</span><span class=o>&gt;=</span><span class=mi>1</span><span class=o>&amp;&amp;</span><span class=nx>f</span><span class=o>&lt;=</span><span class=mi>3</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34; &#34;</span><span class=o>+</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>f</span><span class=p>)</span><span class=o>+</span><span class=s2>&#34; 周前&#34;</span><span class=p>;</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nx>c</span><span class=o>&gt;=</span><span class=mi>1</span><span class=o>&amp;&amp;</span><span class=nx>c</span><span class=o>&lt;=</span><span class=mi>6</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34; &#34;</span><span class=o>+</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>c</span><span class=p>)</span><span class=o>+</span><span class=s2>&#34; 天前&#34;</span><span class=p>;</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nx>u</span><span class=o>&gt;=</span><span class=mi>1</span><span class=o>&amp;&amp;</span><span class=nx>u</span><span class=o>&lt;=</span><span class=mi>23</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34; &#34;</span><span class=o>+</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>u</span><span class=p>)</span><span class=o>+</span><span class=s2>&#34; 小时前&#34;</span><span class=p>;</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nx>a</span><span class=o>&gt;=</span><span class=mi>1</span><span class=o>&amp;&amp;</span><span class=nx>a</span><span class=o>&lt;=</span><span class=mi>59</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34; &#34;</span><span class=o>+</span><span class=nb>parseInt</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span><span class=o>+</span><span class=s2>&#34; 分钟前&#34;</span><span class=p>;</span><span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=nx>s</span><span class=o>&gt;=</span><span class=mi>0</span><span class=o>&amp;&amp;</span><span class=nx>s</span><span class=o>&lt;=</span><span class=nx>r</span><span class=p>)</span><span class=nx>n</span><span class=o>=</span><span class=s2>&#34;刚刚&#34;</span><span class=p>;</span><span class=k>else</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=butterfly-主题添加首页轮播>butterfly 主题添加首页轮播</h2><p>添加首页轮播借助了 <a class=link href=https://butterfly.js.org/posts/ea33ab97/ target=_blank rel=noopener>butterfly 主题自定义组件</a>的功能实现，通过在自定义组件处加载 JavaScript 生成首页的轮播展示。</p><h3 id=创建-widgetyml>创建 widget.yml</h3><p>在Hexo博客目录中的<code>source/_data</code>（如果没有 _data 文件夹，请自行创建），创建一个文件 widget.yml，代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>top</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class=l>latestBB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id_name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>最新说说</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=l>fas fa-bolt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>order</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;div class=&#34;swiper-container swiper-container-aside&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        &lt;div class=&#34;swiper-wrapper swiper-weapper-aside&#34;&gt;&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;a class=&#34;bb-btn button--animated&#34; href=&#34;/say/&#34; title=&#34;查看全部&#34;&gt;&lt;i class=&#34;far fa-hand-point-right fa-fw&#34;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        window.kkBBConfig = {
</span></span></span><span class=line><span class=cl><span class=sd>          limit: 10,
</span></span></span><span class=line><span class=cl><span class=sd>          blog:&#39;/say/&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          api_url:
</span></span></span><span class=line><span class=cl><span class=sd>            &#39;https://xxx/json/bber.json&#39;//你的json url
</span></span></span><span class=line><span class=cl><span class=sd>        }
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script src=&#34;https://cdn.jsdelivr.net/npm/butterfly-bber-swiper/dist/index.min.js&#34;&gt;&lt;/script&gt;</span><span class=w>      
</span></span></span></code></pre></td></tr></table></div></div><p>2022.5.18 <code>jsdelivr</code>用不了，需要修改地址（本地相对路径）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>top</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class=l>latestBB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id_name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>最新说说</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=l>fas fa-bolt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>order</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;div class=&#34;swiper-container swiper-container-aside&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        &lt;div class=&#34;swiper-wrapper swiper-weapper-aside&#34;&gt;&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;a class=&#34;bb-btn button--animated&#34; href=&#34;/say/&#34; title=&#34;查看全部&#34;&gt;&lt;i class=&#34;far fa-hand-point-right fa-fw&#34;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        window.kkBBConfig = {
</span></span></span><span class=line><span class=cl><span class=sd>          limit: 10,
</span></span></span><span class=line><span class=cl><span class=sd>          blog:&#39;/say/&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          api_url:
</span></span></span><span class=line><span class=cl><span class=sd>            &#39;https://xxx/json/bber.json&#39;//你的json url
</span></span></span><span class=line><span class=cl><span class=sd>        }
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script src=&#34;/img/js/butterfly-bber-swiper.min.js&#34;&gt;&lt;/script&gt;</span><span class=w>      
</span></span></span></code></pre></td></tr></table></div></div><h3 id=去掉侧边栏最新说说>去掉侧边栏最新说说</h3><p>在 <code>blog/source/css/custom.css</code> 文件中，加入以下代码即可。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* 去掉侧边栏最新吐槽 */</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>latestBB</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=解决移动端二级菜单缩进问题>解决移动端二级菜单缩进问题</h3><p>设置完首页轮播后，移动端二级菜单会出现缩进问题，浏览器F12发现问题：</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/QQ%E6%88%AA%E5%9B%BE20220521125739.jpg loading=lazy></p><p>解决方法：</p><p><code>butterfly-bber-swiper.min.js</code>(轮播js文件)，<del>搜索<code>bbTimeList</code>删除前面的<code>padding: 0;\n</code></del>；直接搜索<code>padding: 0;\n</code>将其删除，注意后面就是<code>bbTimeList</code>，搜索<code>bbTimeList</code>会出现多个结果，故搜索后者较好。</p><h2 id=部署speak>部署Speak</h2><p>2022.8.1 由于腾讯云开发要开始收费了，故将<code>哔哔点啥</code>改成<code>Speak</code>。官方文档：</p><ul><li><p><a class=link href=https://www.antmoe.com/speak/ target=_blank rel=noopener>小康Speak</a></p></li><li><p><a class=link href=https://kkapi-doc.vercel.app/ target=_blank rel=noopener>kkAPI-Doc</a></p><ul><li><p><a class=link href=https://github.com/kkfive/kkapi-open target=_blank rel=noopener>kkapi-open</a></p></li><li><p><a class=link href=https://github.com/kkfive/kkadmin-open target=_blank rel=noopener>kkadmin-open</a></p></li><li><p><a class=link href=http://github.com/kkfive/iSpeak/ target=_blank rel=noopener>iSpeak</a></p></li></ul></li></ul><blockquote><p>首先要参考上面官方文档搭建好API、后台管理等内容。然后再弄前端。Vercel搭建见官方文档，<strong>下面主要记录服务器部署。</strong></p></blockquote><h3 id=docker-安装-mongodb>Docker 安装 MongoDB</h3><p>1.先安装docker，参考：<a class=link href=/archives/9755dbc8/>Debian 10 安装 Docker & Docker Compose</a></p><p>2.取最新版的 MongoDB 镜像</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker pull mongo:latest
</span></span></code></pre></td></tr></table></div></div><p>3.查看本地镜像，使用以下命令来查看是否已安装了 mongo：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker images
</span></span></code></pre></td></tr></table></div></div><p>4.运行容器</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run -d --name mongodb <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-p 27017:27017 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-v /my/own/datadir:/data/db <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-e <span class=nv>MONGO_INITDB_ROOT_USERNAME</span><span class=o>=</span>mongoadmin <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-e <span class=nv>MONGO_INITDB_ROOT_PASSWORD</span><span class=o>=</span>secret <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	mongo
</span></span></code></pre></td></tr></table></div></div><p>之后可以使用工具测试一下连接。如<code>navicat</code></p><p>5.使容器开机启动</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker update --restart=always mongodb
</span></span></code></pre></td></tr></table></div></div><h3 id=kkapi-部署>kkapi 部署</h3><p>1.首先克隆项目源码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://ghproxy.com/https://github.com/kkfive/kkapi-open.git
</span></span></code></pre></td></tr></table></div></div><p>2.接下来j进入项目目录，安装项目需要安装的工具 <code>yarn</code> 和 <code>pm2</code>，分别是 :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd kkapi-open
</span></span><span class=line><span class=cl>apt install npm -y
</span></span><span class=line><span class=cl>npm i yarn -g
</span></span><span class=line><span class=cl>npm i pm2 -g
</span></span></code></pre></td></tr></table></div></div><p>3.<strong>升级node版本</strong>，仓库给的构建版本是16+的，node版本过低，下一步会出错，最后一步项目无法启动。(上面安装npm时默认会安装低版本node，所以要更新node版本)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>node --version
</span></span><span class=line><span class=cl>curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -
</span></span><span class=line><span class=cl>sudo apt install nodejs -y
</span></span><span class=line><span class=cl>node --version
</span></span></code></pre></td></tr></table></div></div><p>上面操作会安装最新版的node，安装nodeV16：<code>curl -sL https://deb.nodesource.com/setup_16.x | sudo bash -</code></p><p>4.然后安装项目所需依赖 <code>yarn install</code></p><p>5.之后再执行 <code>yarn build</code> 编译项目。<del>这里我的小鸡顶不住编译所以自己在本地编译传上去了。</del></p><p>6.在项目文件夹创建环境变量文件，格式如</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi local.env
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>PORT</span><span class=o>=</span><span class=m>3000</span>
</span></span><span class=line><span class=cl><span class=nv>DATABASE_URL</span><span class=o>=</span>mongodb://127.0.0.1:27017/kkpaiopen?authSource<span class=o>=</span>admin
</span></span><span class=line><span class=cl><span class=nv>DATABASE_USER</span><span class=o>=</span>mongoadmin
</span></span><span class=line><span class=cl><span class=nv>DATABASE_PASSWORD</span><span class=o>=</span>secret
</span></span><span class=line><span class=cl><span class=c1># 加密密钥 测试</span>
</span></span><span class=line><span class=cl><span class=nv>SECRETKEY</span><span class=o>=</span>xxxxxxxxxxxxxxx
</span></span></code></pre></td></tr></table></div></div><p>7.使用 <code>pm2</code> 使用守护线程启动项目 <code>pm2 start pm2.json</code></p><p>我启动项目遇到了 <code>[PM2][WARN] Expect “restart_delay” to be a typeof [object Number], but now is [object String]</code> 错误，这个错误原因是作者的 pm2.json 中的 <code>restart_delay</code> 值是字符串类型 <code>60s</code> 改成数值 <code>60</code> 就可以了。</p><p>8.测试项目是否成功启动 可以使用 <code>lsof -i:端口</code> 查看端口是否被监听判断项目是否成功启动。没成功的原因大概率是因为数据库连接地址、数据库账号密码不正确。</p><p>9.创建初始化用户 <code>curl http://127.0.0.1:3000/api/user/init?userName=bore</code> 创建的默认用户名和密码是 <code>bore</code> 和 <code>123456</code>，这个用户名密码用来登陆可视化的管理后台，并且用户似乎<strong>只能拥有一个</strong>。</p><p>10.更新项目</p><p>进入项目并执行一下命令：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git pull
</span></span><span class=line><span class=cl>yarn build
</span></span><span class=line><span class=cl>pm2 restart pm2.json
</span></span></code></pre></td></tr></table></div></div><p><strong>11.备份</strong></p><p><code>/my/own/datadir</code> 这一段就是数据库的文件，把这个打包搞走就行，然后换到新地方以后，部署mongodb数据库还要对应上。</p><p><strong>首先完整搭建好（要初始化账号，能访问后台，这时后台会显示什么都没有），然后删除<code>my</code>文件夹，将备份的数据库文件夹上传到相应目录，重启容器即可登录后台，查看到原来的数据了。</strong></p><p>定时备份数据库，参考：<a class=link href=https://bore.vip/archives/3a4bd17/ target=_blank rel=noopener>halo 定时备份的方法</a></p><h3 id=开机启动kkapi>开机启动kkapi</h3><p>1.编辑脚本</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi s.sh
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=ch>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=ch></span><span class=nx>cd</span> <span class=o>/</span><span class=nx>root</span><span class=o>/</span><span class=nx>kkapi</span><span class=o>-</span><span class=nx>open</span>
</span></span><span class=line><span class=cl><span class=err>/usr/local/bin/pm2 start pm2.json</span>
</span></span></code></pre></td></tr></table></div></div><p>2.赋予脚本执行权限</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod +x /root/s.sh
</span></span></code></pre></td></tr></table></div></div><p>运行的时候就输入下面的代码即可：<code>./s.sh</code></p><p>3.设定开机自动运行脚本</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>crontab -e
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@reboot /root/s.sh
</span></span></code></pre></td></tr></table></div></div><h3 id=配置域名访问>配置域名访问</h3><p>参考：</p><p><a class=link href=/archives/d5e37958/#%e9%85%8d%e7%bd%ae%e5%9f%9f%e5%90%8d%e8%ae%bf%e9%97%ae>配置域名访问</a></p><p><a class=link href=/archives/d5e37958/#%e7%94%b3%e8%af%b7SSL%e8%af%81%e4%b9%a6>申请 SSL 证书</a></p><p><a class=link href=/archives/58fed3fc/#%e4%bd%bf%e7%94%a8-webroot-%e8%87%aa%e5%8a%a8%e7%94%9f%e6%88%90%e8%af%81%e4%b9%a6-1>SSL证书自动续期</a></p><p><strong>注意修改反代端口号，如果SSL443端口不能用，将<code>listen 443</code>改成<code>listen 1314</code></strong></p><h3 id=kkapiadmin可视化管理后台>kkapiadmin（可视化管理后台）</h3><p>见官方文档：<a class=link href=https://kkapi.js.org/guide/admin/setup.html target=_blank rel=noopener>kkapi后台配置</a></p><p>之后登录就是用前面初始化的用户名密码，进入后台以后可以修改密码。登陆后台以后需要设置：</p><ul><li>ISpeak 标签。因为发布说说是需要选择标签的，标签中的背景颜色值是<strong>十六进制的颜色</strong>代码</li><li>添加用户token。<strong>需要注意！！！</strong>，添加的token的<strong>标题</strong>只能是 <code>speak</code> 不能是其他的，否则发布说说时会提示token不存在，发布时验证的就是字段为 <code>speak</code> 的token的值。</li></ul><h2 id=前端>前端</h2><p>参考：<a class=link href=https://kkapi-doc.vercel.app/posts/ispeak/front.html#%E5%8D%9A%E5%AE%A2%E5%89%8D%E7%AB%AF%E6%96%B9%E6%A1%88 target=_blank rel=noopener>博客前端方案</a>，新建一个<code>Markdown</code>文件：</p><h3 id=v440以前>v4.4.0以前</h3><p><strong>官方：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;tip&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;text-align:center;&#34;</span><span class=p>&gt;</span>ipseak加载中<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;ispeak&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/ispeak@4.2.0/style.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>article-container</span> <span class=p>.</span><span class=nc>D-avatar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>10</span><span class=kt>px</span> <span class=mi>0</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>D-footer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/discuss/dist/Discuss.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/ispeak@4.2.0/ispeak.umd.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>head</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;head&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>meta</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;meta&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=s1>&#39;no-referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>head</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>meta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>ispeak</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ispeak</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#ispeak&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>api</span><span class=o>:</span> <span class=s1>&#39;https://kkapi-dev.vercel.app/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;61fe93508fd621d39a155725&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageSize</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>loading_img</span><span class=o>:</span> <span class=s1>&#39;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>initCommentName</span><span class=o>:</span> <span class=s1>&#39;Discuss&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>initCommentOptions</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>serverURLs</span><span class=o>:</span> <span class=s1>&#39;https://kkdiscuss.vercel.app/&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;ispeak 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s1>&#39;none&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=s1>&#39;ipseak依赖加载失败！&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>自用：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;js-pjax&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;tip&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;text-align:center;&#34;</span><span class=p>&gt;</span>ipseak加载中<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;js-pjax&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;ispeak&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn1.tianli0.top/npm/ispeak@4.3.3/style.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>article-container</span> <span class=p>.</span><span class=nc>D-avatar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>10</span><span class=kt>px</span> <span class=mi>0</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>D-footer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn1.tianli0.top/npm/ispeak@4.3.3/ispeak.umd.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>head</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;head&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>meta</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;meta&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=s1>&#39;no-referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>head</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>meta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>ispeak</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ispeak</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#ispeak&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>api</span><span class=o>:</span> <span class=s1>&#39;https://kkapi-open-six.vercel.app/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;这里填个人ID&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageSize</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>loading_img</span><span class=o>:</span> <span class=s1>&#39;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>speakPage</span><span class=o>:</span> <span class=s1>&#39;/say&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>githubClientId</span><span class=o>:</span> <span class=s1>&#39;这里填githubClientId&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hideComment</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;ispeak 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s1>&#39;none&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=s1>&#39;ipseak依赖加载失败！&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><ul><li>如若CDN用不了，上面的<code>CSS</code>、<code>JS</code>、<code>图像</code>等可以用本地路径，如：<code>/img/loading.gif</code> <code>/img/js/speak/style.css</code>，不用使用：<del>../img/loading.gif</del>，使用上面的相对路径即可。</li><li>hugo loveit主题要把 KaTeX 在这个页面单独关闭，因为和说说冲突了。<code>math: false</code></li></ul></blockquote><h3 id=v440以后>v4.4.0以后</h3><p><strong>官方：</strong> （以<a class=link href=https://artalk.js.org/ target=_blank rel=noopener>Artalk</a>评论为例）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;tip&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;text-align:center;&#34;</span><span class=p>&gt;</span>ipseak加载中<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;ispeak&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/ispeak@4.4.0/style.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/ispeak@4.4.0/ispeak.umd.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- CSS --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/artalk@2.3.4/dist/Artalk.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- JS --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/artalk@2.3.4/dist/Artalk.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>head</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;head&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>meta</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;meta&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=s1>&#39;no-referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>head</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>meta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>ispeak</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ispeak</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#ispeak&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>api</span><span class=o>:</span> <span class=s1>&#39;https://kkapi-dev.vercel.app/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;61fe93508fd621d39a155725&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageSize</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>loading_img</span><span class=o>:</span> <span class=s1>&#39;https://bu.dusays.com/2021/03/04/d2d5e983e2961.gif&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>comment</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>speak</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>// 4.4.0 之后在此回调函数中初始化评论
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=kr>const</span> <span class=p>{</span> <span class=nx>_id</span><span class=p>,</span> <span class=nx>title</span><span class=p>,</span> <span class=nx>content</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>speak</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>contentSub</span> <span class=o>=</span> <span class=nx>content</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=k>new</span> <span class=nx>Artalk</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;.ispeak-comment&#39;</span><span class=p>,</span> <span class=c1>// 默认情况下 ipseak 生成class为 ispeak-comment 的div
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>pageKey</span><span class=o>:</span> <span class=s1>&#39;/speak/info.html?q=&#39;</span> <span class=o>+</span> <span class=nx>_id</span><span class=p>,</span> <span class=c1>// 手动传入当前speak的唯一id
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>pageTitle</span><span class=o>:</span> <span class=nx>title</span> <span class=o>||</span> <span class=nx>contentSub</span><span class=p>,</span> <span class=c1>// 手动传入当前speak的标题(由于content可能过长，因此截取前30个字符)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>server</span><span class=o>:</span> <span class=s1>&#39;https://api.antmoe.com/artalk/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>site</span><span class=o>:</span> <span class=s1>&#39;speak&#39;</span> <span class=c1>// 你的站点名
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;ispeak 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s1>&#39;none&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=s1>&#39;ipseak依赖加载失败！&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><a class=link href=https://kkapi.js.org/posts/ispeak/comment.html#%E8%AF%B4%E6%98%8E target=_blank rel=noopener>官方设置评论</a>：</p><p><code>info.md</code>页面内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>title: Speak
</span></span><span class=line><span class=cl>date: 2022-08-21 14:11:00
</span></span><span class=line><span class=cl>update: 2022-08-21 14:11:00
</span></span><span class=line><span class=cl>top_img: https://tva1.sinaimg.cn/large/005B3XPgly1ghkxqgvmy0j30zk0irn2q.jpg
</span></span><span class=line><span class=cl>aside: false
</span></span><span class=line><span class=cl>comments: false
</span></span><span class=line><span class=cl>description: 欢迎来到小康的Speak页面，快来看看小康分享了什么speak！
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- CSS --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/artalk@2.3.4/dist/Artalk.css&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#39;content&#39;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#39;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#39;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>{% btn &#39;https://www.antmoe.com/speak/&#39;,查看全部,far fa-hand-point-right,block center blue larger %}
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>hr</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#39;ispeak-comment&#39;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- JS --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/artalk@2.3.4/dist/Artalk.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/marked@4.0.18/marked.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>searchParams</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URLSearchParams</span><span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>search</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>speakId</span> <span class=o>=</span> <span class=nx>searchParams</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;q&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>path</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>pathname</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>apiURL</span> <span class=o>=</span> <span class=s1>&#39;https://kkapi.vercel.app/api/ispeak&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>markedRender</span> <span class=o>=</span> <span class=p>(</span><span class=nx>body</span><span class=p>,</span> <span class=nx>loading_img</span><span class=o>=</span><span class=s1>&#39;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#39;</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>renderer</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>image</span><span class=p>(</span><span class=nx>href</span><span class=p>,</span> <span class=nx>title</span><span class=p>,</span> <span class=nx>text</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=sb>`&lt;a href=&#34;${href}&#34; target=&#34;_blank&#34; data-fancybox=&#34;group&#34; class=&#34;fancybox&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>            &lt;img speak-src=&#34;${href}&#34; src=${loading_img} alt=&#39;${text}&#39;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>            &lt;/a&gt;`</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>marked</span><span class=p>.</span><span class=nx>setOptions</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>renderer</span><span class=o>:</span> <span class=k>new</span> <span class=nx>marked</span><span class=p>.</span><span class=nx>Renderer</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>      <span class=nx>highlight</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>code</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>hljs</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>hljs</span><span class=p>.</span><span class=nx>highlightAuto</span><span class=p>(</span><span class=nx>code</span><span class=p>).</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>code</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>pedantic</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>gfm</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>tables</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>breaks</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>sanitize</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>smartLists</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>smartypants</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>xhtml</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>marked</span><span class=p>.</span><span class=nx>use</span><span class=p>({</span> <span class=nx>renderer</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>marked</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>fetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>apiURL</span><span class=si>}</span><span class=sb>/get/</span><span class=si>${</span><span class=nx>speakId</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>response</span> <span class=p>=&gt;</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>res</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>res</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nx>data</span><span class=p>){</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=p>{</span><span class=nx>title</span><span class=p>,</span><span class=nx>content</span><span class=p>}</span> <span class=o>=</span> <span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=kr>const</span> <span class=nx>contentSub</span> <span class=o>=</span> <span class=nx>content</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>30</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;.content&#39;</span><span class=p>).</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=nx>markedRender</span><span class=p>(</span><span class=nx>content</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span><span class=p>(</span><span class=nx>title</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>title</span> <span class=o>=</span> <span class=nx>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=k>new</span> <span class=nx>Artalk</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;.ispeak-comment&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageKey</span><span class=o>:</span> <span class=nx>path</span> <span class=o>+</span> <span class=s1>&#39;?q=&#39;</span> <span class=o>+</span> <span class=nx>speakId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageTitle</span><span class=o>:</span> <span class=nx>title</span> <span class=o>||</span> <span class=nx>contentSub</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>server</span><span class=o>:</span> <span class=s1>&#39;https://api.antmoe.com/artalk/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>site</span><span class=o>:</span> <span class=s1>&#39;speak&#39;</span><span class=p>,</span> <span class=c1>// 你的站点名
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>useBackendConf</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>自用：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;js-pjax&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;tip&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;text-align:center;&#34;</span><span class=p>&gt;</span>ipseak加载中<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;js-pjax&#34;</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;ispeak&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/styles/atom-one-dark.min.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn1.tianli0.top/npm/ispeak@4.4.0/style.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>#</span><span class=nn>article-container</span> <span class=p>.</span><span class=nc>D-avatar</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>10</span><span class=kt>px</span> <span class=mi>0</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>D-footer</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/highlight.js/10.6.0/highlight.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.staticfile.org/marked/2.0.0/marked.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn1.tianli0.top/npm/ispeak@4.4.0/ispeak.umd.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>head</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;head&#39;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>meta</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;meta&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>meta</span><span class=p>.</span><span class=nx>content</span> <span class=o>=</span> <span class=s1>&#39;no-referrer&#39;</span>
</span></span><span class=line><span class=cl>  <span class=nx>head</span><span class=p>.</span><span class=nx>appendChild</span><span class=p>(</span><span class=nx>meta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>ispeak</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>ispeak</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>el</span><span class=o>:</span> <span class=s1>&#39;#ispeak&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>api</span><span class=o>:</span> <span class=s1>&#39;https://kkapi-open-six.vercel.app/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>author</span><span class=o>:</span> <span class=s1>&#39;你的个人ID&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>pageSize</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>loading_img</span><span class=o>:</span> <span class=s1>&#39;https://bu.dusays.com/2022/05/01/626e88f349943.gif&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>speakPage</span><span class=o>:</span> <span class=s1>&#39;/say&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>githubClientId</span><span class=o>:</span> <span class=s1>&#39;你的githubClientId&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>hideComment</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>      <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;ispeak 加载完成&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>style</span><span class=p>.</span><span class=nx>display</span> <span class=o>=</span> <span class=s1>&#39;none&#39;</span>
</span></span><span class=line><span class=cl>      <span class=p>})</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;tip&#39;</span><span class=p>).</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=s1>&#39;ipseak依赖加载失败！&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>注意：</p><ol><li>从v4.4.0的上一个版本v4.3.3就可以添加<code>hideComment: true,</code>隐藏评论</li><li>~~Artalk还未搭建好，故没有加入相关字段。~~评论搞不定，算了。感觉说说没必要弄评论。只能用V4.3.3了，或者新版本关闭评论。</li></ol></blockquote><h2 id=首页轮播>首页轮播</h2><p>参考上面，在Hexo博客目录中的<code>source/_data</code>（如果没有 _data 文件夹，请自行创建），创建一个文件 widget.yml，代码如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>top</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class=l>latestBB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id_name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Ispeak</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=l>fas fa-bolt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>order</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;div class=&#34;swiper-container swiper-container-aside&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        &lt;div class=&#34;swiper-wrapper swiper-weapper-aside&#34;&gt;&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;a class=&#34;bb-btn button--animated&#34; href=&#34;/say/&#34; title=&#34;查看全部&#34;&gt;&lt;i class=&#34;far fa-hand-point-right fa-fw&#34;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        window.kkBBConfig = {
</span></span></span><span class=line><span class=cl><span class=sd>          limit: 10,
</span></span></span><span class=line><span class=cl><span class=sd>          blog:&#39;/say/&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          api_url: &#39;你的api地址（末尾不要/）&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          author: &#39;你的个人ID&#39;            
</span></span></span><span class=line><span class=cl><span class=sd>        }
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script src=&#34;https://cdn1.tianli0.top/npm/iwyang@1.0.8/speak/butterfly-speak-swiper@1.1.0.min.js&#34;&gt;&lt;/script&gt;</span><span class=w>      
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>如若轮播j<code>js</code>CDN用不了，上面轮播<code>js</code>可改成本地：<code>/img/js/speak/butterfly-speak-swiper@1.1.0.min.js</code></p></blockquote><p>上面是自己瞎改的，不过能用。最后可以看上面<code>解决移动端二级菜单缩进问题</code>，解决缩进问题。<strong>下面是官方解答：<a class=link href=https://github.com/kkfive/kkapi-open/issues/2 target=_blank rel=noopener>怎样使ispeak实现首页轮播</a></strong></p><blockquote><p>我个人的方法是通过挂载在侧边栏，然后侧边栏引用js动态插入顶部轮播位置。</p><p>参考代码：</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>bottom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>class_name</span><span class=p>:</span><span class=w> </span><span class=l>latestBB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id_name</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Ispeak</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=l>fas fa-bolt</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>order</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>html</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;div class=&#34;swiper-container swiper-container-aside&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        &lt;div class=&#34;swiper-wrapper swiper-weapper-aside&#34;&gt;&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;a class=&#34;bb-btn button--animated&#34; href=&#34;/speak/&#34; title=&#34;查看全部&#34;&gt;&lt;i class=&#34;far fa-hand-point-right fa-fw&#34;&gt;&lt;/i&gt; 查看更多 &lt;/a&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>        window.kkBBConfig = {
</span></span></span><span class=line><span class=cl><span class=sd>          limit: 9,
</span></span></span><span class=line><span class=cl><span class=sd>          blog:&#39;/speak&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          api_url: &#39;api地址&#39;,
</span></span></span><span class=line><span class=cl><span class=sd>          author: &#39;你的用户token&#39;
</span></span></span><span class=line><span class=cl><span class=sd>        }
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;/script&gt;
</span></span></span><span class=line><span class=cl><span class=sd>      &lt;script src=&#34;https://cdn1.tianli0.top/npm/butterfly-speak-swiper@1.1.0/dist/index.min.js&#34;&gt;&lt;/script&gt;</span><span class=w>      
</span></span></span></code></pre></td></tr></table></div></div><h3 id=去掉侧边栏最新说说-1>去掉侧边栏最新说说</h3><p>在 <code>blog/source/css/custom.css</code> 文件中，加入以下代码即可。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* 去掉侧边栏最新吐槽 */</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>latestBB</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=发送speak方式>发送speak方式</h2><p>参考：<a class=link href=https://kkapi-doc.vercel.app/posts/ispeak/send-mode.html target=_blank rel=noopener>发送方式</a></p><h3 id=安卓手机上快捷方式发送>安卓手机上快捷方式发送</h3><blockquote><p>此部分转自：https://blog.leonus.cn/2022/talkInAndroid.html</p></blockquote><h4 id=获取api的url>获取api的url</h4><p>这个很好弄，只需要在你部署的API地址后面加上<code>/api/ispeak/addByToken</code>即可
如：<code>https://xxx.vercel.app/api/ispeak/addByToken</code>（不是后台的地址，而是api的地址，也就是你部署的时候第一个部署的那个）</p><h4 id=获取标签id>获取标签id</h4><blockquote><p>用谷歌浏览器简单些，如果开发者工具是英语，可点击右上角小齿轮切换成中文。</p></blockquote><p>1.先登录到<code>Ispeak管理后台</code>，并切换到<code>Ispeak标签管理</code>。</p><p>2.然后按F12打开<code>开发者工具</code>，依次点击<code>Network(网络)</code>—<code>Fetch/XHR</code>—刷新网页—找到<code>getByPage...</code>(总共就两个，鼠标<strong>选择下面一个</strong>。)— 选中<code>响应</code>然后点击左下角的一个<code>{}</code>进行格式化（美观输出），我们分别复制id(name上面的id，不是user厘米俺的id，别弄混了)发送到手机即可(<strong>记清楚对应的标签</strong>，别到时候弄混了)
详细请看下图：</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/kzt.png loading=lazy></p><h4 id=获取token网页端发送>获取token网页端发送</h4><p>在后台的设置里，找到 设置 > 个人设置 > Tokens > 添加token
标题填写<code>speak</code>，值随便填。将填写的值发送到手机。</p><h4 id=下载软件>下载软件</h4><p>下载<code>HTTP Shortcuts</code>，可以直接使用谷歌搜索下载(推荐)
也可以通过Github下载：https://github.com/Waboodoo/HTTP-Shortcuts/releases
不确定手机什么内核的可以下载<code>app-universal-release.apk</code></p><h4 id=添加变量><strong>添加变量</strong></h4><p>1.点击右上角三个点 > 变量，点击加号，选择<code>输入文本</code>，名称填<code>content</code>，标题可以填：说说内容，下面的对话框可填可不填，这都不是必须的。</p><p>输入选项选中<code>多行</code>,高级设置选中<code>JSON编码</code>，然后点右上角对号进行保存。</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/content.jpg loading=lazy></p><p>2.再点击加号，选择<code>选项</code>，名称填<code>tag</code>，对话框标题可填：标签，然后添加选项。标签填写你的标签的名字，值填写你的标签对应的ID，然后点确定。
如果有多个标签可以继续添加，高级设置选中<code>JSON编码</code>，都添加完之后点右上角对号进行保存。</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/tags.jpg loading=lazy></p><p>3.再点击加号，选择<code>选项</code>，名称填<code>type</code>，对话框标题可填：<code>可视范围</code>，然后添加以下3个选项。标签填写你的标签的名字，值填写<code>0</code>、<code>1</code>、<code>2</code>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>1.标签：公开         值：0
</span></span><span class=line><span class=cl>2.标签：登录可见      值：1
</span></span><span class=line><span class=cl>3.标签：仅自己        值：2
</span></span></code></pre></td></tr></table></div></div><p>填完后记得高级设置选中<code>JSON编码</code>，都添加完之后点右上角对号进行保存。</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/type.jpg loading=lazy></p><h4 id=添加快捷方式>添加快捷方式</h4><p>返回主页面，点击加号，选择最上面的<code>新建快捷方式</code>，名称随便，描述随便。</p><p>1.点击<code>基本设置</code>，方法选择<code>POST</code>，URL填写上面获取的<code>API的URL</code>，然后返回</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/kj.jpg loading=lazy></p><p>2.点击<code>请求头</code>，点击加号，头部填写<code>Content-Type</code>，值填写<code>application/json</code>，确定然后返回</p><p>3.再点击<code>响应体/响应参数</code>，选择<code>自定义类型</code>，Content-Type填写<code>application/json</code>，请求体填写：(最好不要直接点复制按钮复制代码，直接拖动选择所有行代码，这样张贴就会保留空格)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;token&#34;</span><span class=p>:</span> <span class=s2>&#34;你的token值&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;tag&#34;</span><span class=p>:</span> <span class=s2>&#34;{tag}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;content&#34;</span><span class=p>:</span> <span class=s2>&#34;{content}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;{type}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;showComment&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>{% note warning flat %}
注意：上面的<code>{tag}</code>和<code>{content}</code>以及<code>{type}</code>需要先删除，然后点击旁边的<code>{}</code>插入变量（插入的变量颜色是蓝色）。不能直接填写！！！
tag和content还有type顺序决定你发布时弹窗的先后，tag在上就是先选择标签再输入内容，content在上就是先输入内容再选择标签。
{% endnote %}</p><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/url.jpg loading=lazy></p><p>全部填写完之后保存即可，点击快捷方式就可以实现发送说说了。
长按快捷方式可以将此快捷方式添加到桌面，想发说说时直接点击即可，方便至极。</p><h3 id=网页端发送>网页端发送</h3><p>进入<a class=link href=https://ispeak-biubiu.vercel.app/ target=_blank rel=noopener>ispeak-biubiu</a>页面，首先配置基础配置。</p><blockquote><ul><li>API地址：URL后面要加<code>/api</code></li><li>Token：token的名称必须为<code>speak</code></li></ul></blockquote><p><img src=/img/hexo%E9%85%8D%E7%BD%AE%E5%93%94%E5%93%94%E7%82%B9%E5%95%A5&&amp;Speak/speak.jpg loading=lazy></p><h4 id=自己部署ispeak-biubiu>自己部署<code>ispeak-biubiu</code></h4><p>仓库地址：<a class=link href=https://github.com/kkfive/speak-biubiu target=_blank rel=noopener>speak-biubiu</a>，（直接部署到Vercel不会，所以采用了一种笨方法）</p><p>1.首先fork一份备份，然后下载一份源码到本地，进入项目目录，执行以下命令（过程会很慢）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install
</span></span><span class=line><span class=cl>npm run build
</span></span><span class=line><span class=cl>npm run preview
</span></span></code></pre></td></tr></table></div></div><p>2.然后将<code>dist</code> 这个文件夹里面的网页上传到GitHub，最后再部署到Vercel。</p><blockquote><p>ispeak-biubiu为Vite项目，更多使用说明查看：https://cn.vitejs.dev/</p><p><strong>默认情况下，执行<code>npm run build</code>构建会输出到 <code>dist</code> 文件夹中。你可以部署这个 <code>dist</code> 文件夹到任何你喜欢的平台。</strong></p></blockquote><blockquote><p>PS：可以直接fork此仓库：<a class=link href=https://github.com/iwyang/say target=_blank rel=noopener>iwyang/say</a>，然后部署到<code>Vercel</code></p></blockquote><h3 id=后台发送>后台发送</h3><p>进入后台新增即可。<strong>更多发送方式查看：<a class=link href=https://kkapi-doc.vercel.app/posts/ispeak/send-mode.html target=_blank rel=noopener>发送方式</a></strong></p><h2 id=speaktwikooverce域名绑定>speak&&amp;twikoo&&amp;Verce域名绑定</h2><p><code>Vercel崩了，要绑定个二级域名才能用</code></p><ol><li><p>speak首页轮播api地址：<code>\source\_data\widget.yml</code>，改为可以访问的api url</p></li><li><p>speak页面api地址：<code>\source\say\index.md</code>，改为可以访问的api url</p></li><li><p>安卓快捷方式speak api地址，改为可以访问的api url</p></li><li><p>speak后台管理github秘钥：VITE_GLOB_API_URL改为可以访问的api url</p></li><li><p>speak后台、speak url发布 访问url，改为可以访问的url（还未更改）</p></li><li><p>twikoo envId地址：<code>_config.butterfly.yml</code>，改为可以访问的url</p></li><li><p>友链朋友圈api地址：<code>\source\fcircle\index.md</code>，改为可以访问的api url</p></li></ol><h2 id=参考链接>参考链接</h2><p><a class=link href=https://immmmm.com/bb-by-wechat-pro/ target=_blank rel=noopener>「哔哔点啥」微信公众号 2.0</a></p><p><a class=link href=https://www.fanziqi.site/posts/af935eab.html target=_blank rel=noopener>手把手教你配置哔哔点啥</a></p><p><a class=link href=https://guole.fun/posts/bber-caikeng/ target=_blank rel=noopener>Android “捷径”・木木 bber 踩坑记录 + 电脑 or 手机 4 种方式直发说说</a></p><p><a class=link href=https://www.antmoe.com/posts/7ec820ee/ target=_blank rel=noopener>给 bber 换个皮肤</a></p><p><a class=link href=https://guole.fun/posts/butterfly-custom/#bber%E8%AF%B4%E8%AF%B4%E9%A6%96%E9%A1%B5%E8%BD%AE%E6%92%AD target=_blank rel=noopener>bber说说首页轮播</a></p><p><a class=link href=https://gitlab.com/DreamyTZK/ispeak-bber/-/issues/2 target=_blank rel=noopener>bber的style导致&rsquo;child menu items&rsquo;缩进问题</a></p><p><a class=link href=https://blog.leonus.cn/2022/bb.html target=_blank rel=noopener>Hexo博客哔哔更换记录</a></p><p><a class=link href=https://blog.ccknbc.cc/essay target=_blank rel=noopener>短文 | CC的部落格</a></p><p><a class=link href=https://discuss.js.org/guide/Get-MongoDB-DataBase.html target=_blank rel=noopener>申请免费的 MongoDB 数据库 | Discuss 开源免费评论系统</a></p><p><a class=link href=https://blog.leonus.cn/2022/talkInAndroid.html target=_blank rel=noopener>在安卓手机上快捷发送说说(哔哔)</a></p><p><a class=link href=https://braindance.top/posts/kkapi+ispeak%E8%AF%B4%E8%AF%B4%E9%A1%B5%E9%9D%A2%E9%83%A8%E7%BD%B2/ target=_blank rel=noopener>KKapi+ISpeak说说页面部署</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/hexo/>Hexo</a>
<a href=/tags/hugo/>Hugo</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-edit><svg class="icon icon-tabler icon-tabler-external-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M11 7H6A2 2 0 004 9v9a2 2 0 002 2h9a2 2 0 002-2v-5"/><line x1="10" y1="14" x2="20" y2="4"/><polyline points="15 4 20 4 20 9"/></svg>
<span><a style=color:inherit href=https://github.com/iwyang/hugo/edit/develop/content/post/hexo%e9%85%8d%e7%bd%ae%e5%93%94%e5%93%94%e7%82%b9%e5%95%a5&&amp;Speak.md target=_blank rel="noopener noreferrer">在 GitHub 上编辑此页</a></span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>最后更新于 2024-08-07</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/archives/github-actions%E5%88%A9%E7%94%A8ftp%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2hugo-hexo%E5%88%B0centos-8/><div class=article-details><h2 class=article-title>GitHub Actions利用FTP自动部署hugo-hexo到Centos 8</h2></div></a></article><article><a href=/archives/memos%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95/><div class=article-details><h2 class=article-title>Memos部署记录</h2></div></a></article><article><a href=/archives/%E5%88%A9%E7%94%A8%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%AE%9E%E7%8E%B0twikoo%E6%96%B0%E6%B6%88%E6%81%AF%E6%8F%90%E9%86%92%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E7%AD%89/><div class=article-details><h2 class=article-title>利用企业微信实现twikoo新消息提醒&&数据导出等</h2></div></a></article><article><a href=/archives/hexo-butterfly%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/><div class=article-details><h2 class=article-title>hexo butterfly主题配置与使用</h2></div></a></article><article><a href=/archives/hugo-papermod%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/><div class=article-details><h2 class=article-title>Hugo Papermod主题配置与使用</h2></div></a></article></div></div></aside><script src=//cdn.jsdelivr.net/npm/twikoo@1.6.21/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-submit-action-icon,.twikoo .tk-time,.twikoo .tk-comments-no,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.twikoo .el-input__count{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://t.bore.vip",el:"#tcomment"})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Example Person</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>